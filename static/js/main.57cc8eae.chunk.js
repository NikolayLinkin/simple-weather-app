(this["webpackJsonptest-app-algoritmika"]=this["webpackJsonptest-app-algoritmika"]||[]).push([[0],{24:function(e,t,a){e.exports=a(38)},30:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),o=a.n(c);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(29),a(30);var i=a(2),s=a(19),u=a(20),l=a(22);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach((function(t){Object(l.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={woeid:null,consolidatedWeather:[],time:null,sunRise:null,sunSet:null,today:{},activeTab:"week"},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_LOCATION_SUCCESS":return p({},e,{woeid:t.woeid});case"FETCH_WEEK_WEATHERS_SUCCESS":return p({},e,{consolidatedWeather:t.consolidatedWeather,time:t.time,sunRise:t.sunRise,sunSet:t.sunSet});case"FETCH_TODAY_WEATHERS_SUCCESS":return p({},e,{today:t.today});case"SWITCH_TABS":return p({},e,{activeTab:t.activeTab});default:return e}},b=Object(i.combineReducers)({weather:h});function f(e){var t=Object(u.composeWithDevTools)(Object(i.applyMiddleware)(s.a));return Object(i.createStore)(b,e,t)}var w,y=a(12),v=a(23),_=a(5),E=a(6),T=a(8),k=a(7),O=a(11),j=a(9),S=function(e){var t=e.activeTab,a=e.name,n=e.onClickTab;return r.a.createElement("span",{className:"".concat(t===a?"tabs__tab tabs__tab--active":"tabs__tab"),onClick:function(){n(a)}},a)},C=function(e){var t=e.activeTab,a=e.onClickTab;return r.a.createElement("div",{className:"tabs"},r.a.createElement(S,{name:"today",onClickTab:a,activeTab:t}),r.a.createElement(S,{name:"week",onClickTab:a,activeTab:t}))},g=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],W=["January","February","March","April","May","June","July","August","September","October","November","December"],N=function(e){return"".concat(e.getFullYear(),"/").concat(e.getMonth()+1,"/").concat(e.getDate(),"/")},x=function(e){var t,a,n=e.weekItem,c=(n.weatherStateName,n.weatherStateAbbr),o=n.minTemp,i=n.maxTemp,s=n.applicableDate,u=new Date(s);return r.a.createElement("div",{className:"week-item week-item--".concat(c)},r.a.createElement("div",{className:"week-item__date"},r.a.createElement("div",{className:"week-item__week-day"},(a=u.getDay(),g[a])),r.a.createElement("div",{className:"week-item__month-day"},u.getDate()," ",(t=u.getMonth(),W[t]))),r.a.createElement("div",{className:"week-item__temp"},r.a.createElement("span",{className:"week-item__temp__max"},i.toFixed(0)),"/",r.a.createElement("span",{className:"week-item__temp__min"},o.toFixed(0)),r.a.createElement("img",{src:"https://www.metaweather.com/static/img/weather/png/64/".concat(c,".png"),alt:""})))},D=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=this.props.weekItems;return r.a.createElement("div",{className:"weather__week"},e.map((function(e){return r.a.createElement(x,{key:e.id,weekItem:e})})))}}]),t}(n.Component),A=function(e){function t(){return Object(_.a)(this,t),Object(T.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){var e=this.props;(0,e.fetchTodayWeathers)(e.woeid,new Date)}},{key:"render",value:function(){var e=this.props.today,t=e.minTemp,a=e.maxTemp,n=e.theTemp,c=e.created,o=e.applicableDate,i=e.weatherStateAbbr,s=e.weatherStateName;return Object.keys(this.props.today).length?r.a.createElement("div",{className:"weather__today weather__today--".concat(i)},r.a.createElement("div",{className:"weather__today__last-update"},c),r.a.createElement("div",{className:"weather__today__date"},o),r.a.createElement("img",{src:s,alt:""}),r.a.createElement("div",{className:"weather__today__temp"},r.a.createElement("span",null,n.toFixed(0)),r.a.createElement("span",null,a.toFixed(0),"/",t.toFixed(0)))):r.a.createElement("div",null,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430")}}]),t}(n.Component),F=function(e){function t(e){var a;return Object(_.a)(this,t),(a=Object(T.a)(this,Object(k.a)(t).call(this,e))).state={openTab:"week"},a.onClickTab=a.onClickTab.bind(Object(O.a)(a)),a}return Object(j.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.fetchLocation)("moscow")}},{key:"onClickTab",value:function(e){var t=this.props,a=t.switchTabs;t.activeTab!==e&&a(e)}},{key:"render",value:function(){var e=this.props,t=e.weekItems,a=e.fetchTodayWeathers,n=e.woeid,c=e.activeTab,o=e.today;return r.a.createElement("div",{className:"wrapper"},r.a.createElement(C,{activeTab:c,onClickTab:this.onClickTab}),"week"===c?r.a.createElement(D,{woeid:n,weekItems:t}):"","today"===c?r.a.createElement(A,{fetchTodayWeathers:a,woeid:n,today:o}):"")}}]),t}(n.Component),H=a(4),I=a.n(H),P=a(13),R=a(17),M=a.n(R),U=function(e,t){return fetch(e,t).then((function(e){return e.ok?e.json():Promise.reject(e.text())}),(function(e){return Promise.reject(e)})).then((function(e){return{json:M()(e)}}),(function(e){return{error:e}})).catch((function(e){return M()(e)}))},J="https://cors-anywhere.herokuapp.com/metaweather.com",B=function(e){return"".concat(J,"/api/location/search/?query=").concat(e)},L=function(e){return"".concat(J,"/api/location/").concat(e,"/")},Y=function(e,t){return"".concat(J,"/api/location/").concat(e,"/").concat(t)},K=function(e){return e.weather.consolidatedWeather},q=function(e){return e.weather.woeid},$=function(e){return e.weather.today},z=function(e){return e.weather.activeTab},G=function(e){return{type:"FETCH_LOCATION_SUCCESS",woeid:e}},Q=function(e,t,a,n){return{type:"FETCH_WEEK_WEATHERS_SUCCESS",consolidatedWeather:e,time:t,sunRise:a,sunSet:n}},V=function(e){return function(){var t=Object(P.a)(I.a.mark((function t(a){var n,r,c,o,i,s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(L(e));case 2:n=t.sent,r=n.json,c=r.consolidatedWeather,o=r.time,i=r.sunRise,s=r.sunSet,a(Q(c,o,i,s));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},X=Object(y.b)((function(e){return{weekItems:K(e),woeid:q(e),today:$(e),activeTab:z(e)}}),{fetchLocation:function(e){return function(){var t=Object(P.a)(I.a.mark((function t(a){var n,r,c;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U(B(e));case 2:n=t.sent,r=n.json,c=r[0].woeid,a(G(c)),a(V(c));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fetchTodayWeathers:function(e,t){return function(){var a=Object(P.a)(I.a.mark((function a(n,r){var c,o,i,s;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(c=r(),o=$(c),Object.keys(o).length){a.next=8;break}return a.next=5,U(Y(e,N(t)));case 5:i=a.sent,s=i.json,n({type:"FETCH_TODAY_WEATHERS_SUCCESS",today:s[0]});case 8:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}()},switchTabs:function(e){return function(t){t({type:"SWITCH_TABS",activeTab:e})}},fetchWeekWeathers:V})((function(e){return r.a.createElement(F,e)}));w=X,o.a.render(r.a.createElement(v.AppContainer,null,r.a.createElement(y.a,{store:f()},r.a.createElement(w,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[24,1,2]]]);
//# sourceMappingURL=main.57cc8eae.chunk.js.map